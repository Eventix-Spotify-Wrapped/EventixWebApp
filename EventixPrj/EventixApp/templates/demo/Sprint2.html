{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Meta data -->
        <meta charset="UTF-8">
        <title>[Eventname] | Eventix Summary</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="dist/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="dist/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="dist/favicon/favicon-16x16.png">
        <link rel="manifest" href="dist/favicon/site.webmanifest">
        <link rel="mask-icon" href="dist/favicon/safari-pinned-tab.svg" color="#bde3fc">
        <meta name="msapplication-TileColor" content="#bde3fc">
        <meta name="theme-color" content="#bde3fc">

        <!-- Stylesheet -->
        <link rel="stylesheet" href="{% static 'demo/stylesheet.css' %}" />
        <link rel="stylesheet" href="dist/css/stylesheet.css">
        <link rel="stylesheet" href="https://use.typekit.net/xit4rvk.css">
    </head>
    <body>
        <div id="app">
            <svg class="coin" viewBox="0 0 51.96 59.56">test<path d="m6.45,10.15S7.37.5,15.18.5c12.62,3.12,18,5.31,25.49,7.12s10.79,7.58,10.79,14.01v26.41c0,3.23-4.13,7.81-11.25,7.81s-25.03-8.04-25.03-8.04c0,0-8.73-5.97-8.73-12.63V10.15Z" fill="#f89823" stroke="#231f20" stroke-miterlimit="10"/><path d="m.5,13.36S1.42,3.71,9.23,3.71c12.62,3.12,18,5.31,25.49,7.12s10.79,7.58,10.79,14.01v26.41c0,3.23-4.13,7.81-11.25,7.81s-25.03-8.04-25.03-8.04c0,0-8.73-5.97-8.73-12.63V13.36Z" fill="#f89823" stroke="#231f20" stroke-miterlimit="10"/></svg>

            <div class="slide">
                <img class="logo" src="dist/img/logo.svg" alt="">
                <h1 class="h1">Welcome to your event summary</h1>

                <div id="machine">
                    <svg id="coin-machine" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 246.43 290.13"><rect x=".47" y="191.89" width="206.77" height="42.69" rx="3.73" ry="3.73" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x=".47" y="259.99" width="206.77" height="16.83" rx="2.34" ry="2.34" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="7.47" y="234.57" width="192.78" height="25.42" rx="2.78" ry="2.78" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><path d="m7.47,191.89v-101.28S12.05.45,120.54.45c100.47,0,101.68,93.04,101.68,93.04l1.53,98.39H7.47Z" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="20.7" y="191.89" width="206.77" height="42.69" rx="3.73" ry="3.73" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><path d="m230.42,135.22s15.66-.69,15.56,11.88c-.1,13.14-15.56,12.33-15.56,12.33v-24.21Z" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="211.48" y="119.98" width="18.94" height="55.27" rx="8.81" ry="8.81" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><polygon points="2.81 276.82 17.01 287.39 17.01 276.82 2.81 276.82" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x=".47" y="191.83" width="206.77" height="42.69" rx="3.73" ry="3.73" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><path d="m4.47,276.19h12.71c.32,0,.57.26.57.57h0c0,.33-.26.59-.57.59H4.28c-.45-.37-1.02-.76-1.34-.99" fill="#ffd894"/><path d="m23.57,260.57h-14.01c-.32,0-.58-.26-.58-.58h0c0-.32.01-1.15.58-.58h14.01c.32,0,.58.26.58.58h0c0,.32-.26.58-.58.58Z" fill="#ffd894"/><rect x="8.57" y="233.99" width="8.79" height="1.16" rx=".46" ry=".46" fill="#ffd894"/><rect x="7.97" y="190.15" width="16.49" height="3.12" fill="#ffd894"/><path d="m24.15,205.12v-100.34S29.02,15.39,122.06,15.39s94.87,90.61,94.87,90.61v99.12H24.15Z" fill="#ffa766" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="17.15" y="272.84" width="206.77" height="16.83" rx="2.34" ry="2.34" fill="#ff8d19" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="24.15" y="247.42" width="192.78" height="25.42" rx="2.78" ry="2.78" fill="#ffa766" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="36.37" y1="63.52" x2="205.83" y2="63.52" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="36.84" y="83.47" width="167.41" height="111" rx="13.77" ry="13.77" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="1.08" y1="261" x2="17.78" y2="273.84" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="8.84" y1="259.61" x2="25.71" y2="272.6" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1=".45" y1="196.95" x2="17.44" y2="210.01" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="7.47" y1="191.89" x2="24.46" y2="204.95" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="19.97" y1="50.93" x2="36.37" y2="63.27" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="7.47" y1="90.04" x2="24.46" y2="103.1" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><circle cx="60.39" cy="227.57" r="7.08" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="217.38" y="190.51" width="5.91" height="4.8" fill="#ffd894"/><line x1="24.46" y1="103.1" x2="36.37" y2="103.1" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="204.24" y1="103.1" x2="216.81" y2="103.26" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><polygon points="17.11 241.91 17.15 208.99 .45 196.95 .47 229.9 17.11 241.91" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><path d="m18.07,246.14l-16.55-12.56s-1.05-.71-1.05-5c3.34,2.41,16.63,12.09,16.63,12.09,0,0-.17,4.59.97,5.48Z" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/></svg>
                    <svg id="coin-machine-front" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 207.67 232.94"><path d="m7.45,190.19v-100.34S12.31.45,105.36.45s94.87,90.61,94.87,90.61v99.12H7.45Z" fill="#ffa766" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="19.66" y1="48.58" x2="189.13" y2="48.58" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="20.13" y="68.54" width="167.41" height="111" rx="13.77" ry="13.77" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><path d="m203.5,189.8H4.18c-2.06,0-3.73,1.67-3.73,3.73v35.23c0,2.06,1.67,3.73,3.73,3.73h73.74v-12.73c0-4.76,3.86-8.61,8.61-8.61h35.39c4.33,0,7.85,3.51,7.85,7.85v13.5h73.74c2.06,0,3.73-1.67,3.73-3.73v-35.23c0-2.06-1.67-3.73-3.73-3.73Z" fill="#ff8d19" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><circle cx="43.69" cy="212.64" r="7.08" fill="#ffd894" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="7.75" y1="88.17" x2="19.66" y2="88.17" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><line x1="187.54" y1="88.17" x2="200.11" y2="88.32" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/></svg>
                    <svg id="handle-holder" viewBox="0 0 35.4 56.17"><path d="m19.39,15.7s15.66-.69,15.56,11.88c-.1,13.14-15.56,12.33-15.56,12.33V15.7Z" fill="#ff8d19" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x=".45" y=".45" width="18.94" height="55.27" rx="8.81" ry="8.81" fill="#ff8d19" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/></svg>
                    <svg class="lever" viewBox="0 0 34.59 84.14"><circle cx="17.3" cy="17.3" r="16.85" fill="#f50" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/><rect x="15.66" y="34.06" width="3.31" height="49.63" fill="#ff8d19" stroke="#000" stroke-miterlimit="10" stroke-width=".9"/></svg>
                </div>

                <div class="slide__backfigure"></div>
            </div>
        </div>
    </body>

    <script>

        // Variables
        const amountOfSlide = 7;
        const slideColors = [
            {
                main: "#ED7CB8",
                background: "#F7CBE6"
            },
            {
                main: "#F0933C",
                background: "#F9D89D"
            },
            {
                main: "#9B69F7",
                background: "#ECD9FC"
            },
            {
                main: "#6BE549",
                background: "#CFF5C9"
            },
            {
                main: "#FEFE53",
                background: "#FAFAC9"
            }
        ];
        let app = document.getElementById("app");
        let slide = document.getElementsByClassName("slide")[0];
        let coins = [document.getElementsByClassName("coin")[0]];

        // Add all coins to array
        for (let i = 0; i < (amountOfSlide - 1); i++) coins.push( app.appendChild(coins[0].cloneNode(true)));

        // When the slot machine-handle is clicked
        document.getElementById("machine").addEventListener("click", () => {

            // Pull the lever downwards with a CSS class
            document.getElementsByClassName("lever")[0].classList.add("lever--active");

            // Animate the bottom slide
            document.getElementsByClassName("slide__backfigure")[0].classList.add("slide__backfigure--visible");

            // Calculate the left value so the coins are centered
            let coinsWidth = amountOfSlide * 4;
            let leftRemValue = (36 - coinsWidth) / 2 - 0.4;

            setTimeout(() => {

                // Position every coin centered at the bottom of the screen
                for (let i = 0; i < coins.length; i++) {
                    setTimeout(() => {
                        let coin = coins[i];
                        coin.style.top = 67 + "rem";
                        coin.style.left = leftRemValue + "rem";
                
                        leftRemValue += 4;
                
                        // Let every second coin slide down so they are paired
                        if (i % 2) coin.style.top = (parseInt(coin.style.top.slice(0, -3)) + 1.25) + "rem";

                        // Give them another CSS transition
                        setTimeout(() => coin.style.transition = "left .75s ease-in-out, top 2s ease-in-out", 2000);
                    }, 50 * i);
                }

                setTimeout(() => document.getElementById("machine").style.translate = "-100vw 0", 1750);
            }, 250);

            setTimeout(() => {
                let slideIndex = 0;

                app.addEventListener("click", () => {
                    let slideColor = slideColors[slideIndex];

                    coins[slideIndex].style.left = -100 + "vw";
                    slide.style.backgroundColor = slideColor.background;
                    slide.getElementsByClassName("slide__backfigure")[0].style.backgroundColor = slideColor.main;

                    slideIndex++;

                    coinsWidth = (coins.length - slideIndex) * 4;
                    leftRemValue = (36 - coinsWidth) / 2 - 0.4;

                    for (let i = slideIndex; i < coins.length; i++) {
                        let coin = coins[i];
                        coin.style.left = leftRemValue + "rem";
                        leftRemValue += 4;
                    }
                });
            }, 1);
        }, {once : true});

        // Position all coins as a combined a 

        // let topRemValue = 22;
        // for (let i = 0; i < coins.length; i++) {
        //     let coin = coins[i];

        //     coin.style.zIndex = (coins.length - i) / 2;

        //     coin.style.top = topRemValue + "rem";

        //     if (i % 2) {
        //         coin.style.left = "7rem";
        //         topRemValue = topRemValue + 5;
        //         coin.style.zIndex = coins.length - i;
        //         coin.style.top = (parseInt(coin.style.top.slice(0, -3)) + 1) + "rem";
        //     }
        // }


    </script>
</html>